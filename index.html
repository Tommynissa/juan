<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Bienvenue</title>
  <link rel="stylesheet" href="style.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
  <header>
    <div class="lang-switch">
      <button onclick="setLang('fr')">🇫🇷 FR</button>
      <button onclick="setLang('en')">🇬🇧 EN</button>
    </div>
    <!-- Logo -->
    <img src="logo.png" alt="Anaïs Logo" class="logo">
    <p class="i18n welcome-text"
       data-fr="Bienvenue à Juan-les-Pins, perle de la Côte d’Azur ! Ici, la mer Méditerranée se mêle à l’effervescence des soirées, aux plages dorées et aux balades entre pins et ruelles charmantes. Vous êtes au cœur d’un lieu vivant, entre douceur provençale et élégance azuréenne. Profitez de la plage, des restaurants, des terrasses animées et de l’ambiance unique qui fait la réputation de Juan-les-Pins." 
       data-en="Welcome to Juan-les-Pins, jewel of the French Riviera! Here, the Mediterranean Sea blends with vibrant nightlife, golden beaches, and peaceful walks among pine trees and charming alleys. You’re in the heart of a lively place where Provençal warmth meets Riviera elegance. Enjoy the beach, restaurants, lively terraces, and the unique atmosphere that makes Juan-les-Pins so famous.">
    </p>
  </header>

  <main>
    <!-- Bloc météo -->
    <section>
      <div id="weatherCard" class="weather-card">
        <p class="i18n" data-fr="Chargement de la météo..." data-en="Loading weather..."></p>
      </div>
    </section>

    <!-- Infos utiles -->
    <section>
      <div class="section-header">
        <h2 class="i18n" data-fr="Informations utiles" data-en="Useful Info"></h2>
      </div>
      <div class="cards">
        <div class="card">
          <i class="fa-solid fa-key"></i>
          <p class="i18n" data-fr="Check-in : dès 15h | Check-out : avant 11h" data-en="Check-in: from 3 PM | Check-out: before 11 AM"></p>
        </div>
        <div class="card">
          <i class="fa-solid fa-door-closed"></i>
          <p class="i18n" data-fr="Code porte : 1234A" data-en="Door code: 1234A"></p>
        </div>
        <div class="card">
          <i class="fa-solid fa-square-parking"></i>
          <p class="i18n" data-fr="Parking : privé rue X, badge fourni" data-en="Parking: private on street X, badge provided"></p>
        </div>
        <div class="card">
          <i class="fa-solid fa-wifi"></i>
          <p class="i18n" data-fr="Wi-Fi : MaisonJuan | MDP : 12345678" data-en="Wi-Fi: MaisonJuan | Password: 12345678"></p>
        </div>
      </div>
    </section>
  </main>

  <!-- Script météo -->
  <script>
    const lat = 43.567;
    const lon = 7.112;

    fetch(`https://api.open-meteo.com/v1/forecast?latitude=${lat}&longitude=${lon}&current_weather=true&daily=temperature_2m_max,temperature_2m_min,weathercode&timezone=auto`)
      .then(response => response.json())
      .then(data => {
        const current = data.current_weather;
        const daily = data.daily;

        let forecastHTML = `
          <div class="weather-now">
            <span class="weather-icon">${getWeatherIcon(current.weathercode)}</span>
            <div>
              <h3>${current.temperature}°C</h3>
              <p>Vent / Wind: ${current.windspeed} km/h</p>
            </div>
          </div>
          <div class="weather-forecast">
        `;

        for (let i = 0; i < 3; i++) {
          const date = new Date(daily.time[i]);
          const options = { weekday: 'short' };
          const dayName = date.toLocaleDateString('fr-FR', options);

          forecastHTML += `
            <div class="forecast-day">
              <span>${dayName}</span>
              <span class="weather-icon">${getWeatherIcon(daily.weathercode[i])}</span>
              <span>${daily.temperature_2m_min[i]}° / ${daily.temperature_2m_max[i]}°</span>
            </div>
          `;
        }

        forecastHTML += "</div>";
        document.getElementById("weatherCard").innerHTML = forecastHTML;
      });

    function getWeatherIcon(code) {
      if ([0].includes(code)) return "☀️";
      if ([1,2].includes(code)) return "🌤️";
      if ([3].includes(code)) return "☁️";
      if ([45,48].includes(code)) return "🌫️";
      if ([51,61,80].includes(code)) return "🌦️";
      if ([63,65,81,82].includes(code)) return "🌧️";
      if ([71,73,75,85,86].includes(code)) return "❄️";
      if ([95,96,99].includes(code)) return "⛈️";
      return "❔";
    }
  </script>

  <!-- Menu bas -->
  <nav class="bottom-nav">
    <a href="bienvenue.html"><i class="fa-solid fa-house"></i><span class="i18n" data-fr="Bienvenue" data-en="Welcome"></span></a>
    <a href="asavoir.html"><i class="fa-solid fa-circle-info"></i><span class="i18n" data-fr="À savoir" data-en="To know"></span></a>
    <a href="activites.html"><i class="fa-solid fa-map-location-dot"></i><span class="i18n" data-fr="Activités" data-en="Activities"></span></a>
  </nav>

  <!-- Script de langue -->
  <script>
  function setLang(lang) {
    document.querySelectorAll('.i18n').forEach(el => {
      el.textContent = el.dataset[lang];
    });
    localStorage.setItem("lang", lang);
  }
  document.addEventListener("DOMContentLoaded", () => {
    const savedLang = localStorage.getItem("lang") || "fr";
    setLang(savedLang);
  });
  </script>
</body>
</html>
