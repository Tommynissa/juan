<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Bienvenue</title>
  <link rel="stylesheet" href="style.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
  <header>
    <div class="lang-switch">
      <button onclick="setLang('fr')">🇫🇷 FR</button>
      <button onclick="setLang('en')">🇬🇧 EN</button>
    </div>
    <!-- Logo -->
    <img src="logo.png" alt="Anaïs Logo" class="logo">
    <p class="i18n welcome-text"
       data-fr="Bienvenue à Juan-les-Pins, perle de la Côte d’Azur ! Ici, la mer Méditerranée se mêle à l’effervescence des soirées, aux plages dorées et aux balades entre pins et ruelles charmantes. Vous êtes au cœur d’un lieu vivant, entre douceur provençale et élégance azuréenne. Profitez de la plage, des restaurants, des terrasses animées et de l’ambiance unique qui fait la réputation de Juan-les-Pins." 
       data-en="Welcome to Juan-les-Pins, jewel of the French Riviera! Here, the Mediterranean Sea blends with vibrant nightlife, golden beaches, and peaceful walks among pine trees and charming alleys. You’re in the heart of a lively place where Provençal warmth meets Riviera elegance. Enjoy the beach, restaurants, lively terraces, and the unique atmosphere that makes Juan-les-Pins so famous.">
    </p>
  </header>

  <main>
    <!-- Bloc météo -->
    <section class="weather-section">
      <div id="weatherCard" class="weather-card">
        <p class="i18n" data-fr="Chargement de la météo..." data-en="Loading weather..."></p>
      </div>
    </section>

    <!-- Section infos utiles -->
    <section>
      <div class="section-header">
        <h2 class="i18n" data-fr="Informations utiles" data-en="Useful Info"></h2>
        <a href="asavoir.html" class="btn i18n" data-fr="Voir plus" data-en="See more"></a>
      </div>
      <div class="cards">
        <div class="card">
          <i class="fa-solid fa-car"></i>
          <p class="i18n" data-fr="En route vers l’appartement" data-en="On the way to the apartment"></p>
        </div>
        <div class="card">
          <i class="fa-solid fa-door-open"></i>
          <p class="i18n" data-fr="Votre arrivée" data-en="Your arrival"></p>
        </div>
      </div>
    </section>

    <!-- Section activités -->
    <section>
      <div class="section-header">
        <h2 class="i18n" data-fr="Activités" data-en="Activities"></h2>
        <a href="activites.html" class="btn i18n" data-fr="Voir plus" data-en="See more"></a>
      </div>
      <div class="cards">
        <div class="card">
          <i class="fa-solid fa-wine-glass"></i>
          <p class="i18n" data-fr="Bars & Restaurants" data-en="Bars & Restaurants"></p>
        </div>
        <div class="card">
          <i class="fa-solid fa-person-walking"></i>
          <p class="i18n" data-fr="Se balader" data-en="Take a walk"></p>
        </div>
      </div>
    </section>
  </main>

  <!-- Menu bas -->
  <nav class="bottom-nav">
    <a href="bienvenue.html"><i class="fa-solid fa-house"></i><span class="i18n" data-fr="Bienvenue" data-en="Welcome"></span></a>
    <a href="asavoir.html"><i class="fa-solid fa-circle-info"></i><span class="i18n" data-fr="À savoir" data-en="To know"></span></a>
    <a href="activites.html"><i class="fa-solid fa-map-location-dot"></i><span class="i18n" data-fr="Activités" data-en="Activities"></span></a>
  </nav>

  <!-- Scripts -->
  <script>
  function setLang(lang) {
    document.querySelectorAll('.i18n').forEach(el => {
      el.textContent = el.dataset[lang];
    });
    localStorage.setItem("lang", lang);
  }
  document.addEventListener("DOMContentLoaded", () => {
    const savedLang = localStorage.getItem("lang") || "fr";
    setLang(savedLang);
  });

  // météo
  const lat = 43.567, lon = 7.112;
  fetch(`https://api.open-meteo.com/v1/forecast?latitude=${lat}&longitude=${lon}&current_weather=true&daily=temperature_2m_max,temperature_2m_min,weathercode&timezone=auto`)
    .then(r=>r.json())
    .then(data => {
      const current = data.current_weather, daily = data.daily;
      let html = `<div class="weather-now">
        <span class="weather-icon">${getIcon(current.weathercode)}</span>
        <div><h3>${current.temperature}°C</h3><p>Vent ${current.windspeed} km/h</p></div>
      </div><div class="weather-forecast">`;
      for(let i=0;i<3;i++){
        const d = new Date(daily.time[i]);
        const day = d.toLocaleDateString('fr-FR',{weekday:'short'});
        html += `<div class="forecast-day">
          <span>${day}</span>
          <span class="weather-icon">${getIcon(daily.weathercode[i])}</span>
          <span>${daily.temperature_2m_min[i]}° / ${daily.temperature_2m_max[i]}°</span>
        </div>`;
      }
      html += "</div>";
      document.getElementById("weatherCard").innerHTML = html;
    });
  function getIcon(c){
    if([0].includes(c)) return "☀️";
    if([1,2].includes(c)) return "🌤️";
    if([3].includes(c)) return "☁️";
    if([45,48].includes(c)) return "🌫️";
    if([51,61,80].includes(c)) return "🌦️";
    if([63,65,81,82].includes(c)) return "🌧️";
    if([71,73,75,85,86].includes(c)) return "❄️";
    if([95,96,99].includes(c)) return "⛈️";
    return "❔";
  }
  </script>
</body>
</html>
